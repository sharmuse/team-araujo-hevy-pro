import React from 'react'; import { LogOut, Bell, Sun, Moon, Trash2, Printer, Mail, Home, BarChart } from 'lucide-react'; import { logout, currentUser } from '../lib/auth'; import { getTheme, setTheme } from '../lib/theme'; import { ensurePermission } from '../lib/notify'; export default function TopBar(){ const u:any=currentUser(); const [theme,setT]=React.useState(getTheme()); const out=()=>{ logout(); location.hash='#/login'; }; function toggleTheme(){ const next=theme==='dark'?'light':'dark'; setT(next); setTheme(next);} async function testNotify(){ const ok=await ensurePermission(); if(ok){ new Notification('Team Araújo',{body:'Notificações ativadas.'}); } else { alert('Permita notificações.'); } } return(<header className='header no-print'><div className='brand'><img src='/src/assets/logo.svg' width={28} height={28}/><div><div className='title'>Team Araújo — Hevy Pro</div><div className='badge'>Minimal • Fluido • Completo</div></div></div><div className='row'>{(u && u.loggedIn)&&<div className='kv'>{u.name} — {u.role}</div>}<button className='btn-ghost' onClick={()=>{ const u:any=currentUser(); const t=u?.role==='PROFESSOR'?'#/professor':'#/aluno'; location.hash=t; }} title='Início'><Home size={18}/></button><button className='btn-ghost' onClick={()=>location.hash='#/reports'} title='Relatórios'><BarChart size={18}/></button><button className='btn-ghost' onClick={()=>location.hash='#/emailcfg'} title='Configurar e-mail'><Mail size={18}/></button><button className='btn-ghost' onClick={testNotify} title='Notificações'><Bell size={18}/></button><button className='btn-ghost' onClick={()=>location.hash='#/print'} title='Imprimir'><Printer size={18}/></button><button className='btn-ghost' onClick={toggleTheme} title='Tema'>{theme==='dark'?<Sun size={18}/>:<Moon size={18}/>}</button><button className='btn-ghost' onClick={()=>{ if(confirm('Limpar dados locais?')){ localStorage.clear(); location.hash='#/login'; location.reload(); } }} title='Limpar dados locais'><Trash2 size={18}/></button><button className='btn-ghost' onClick={out} title='Sair'><LogOut size={18}/></button></div></header>) }
